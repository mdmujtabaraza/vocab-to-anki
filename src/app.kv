#:import choice random.choice

#:import Clipboard kivy.core.clipboard.Clipboard
#:import Window kivy.core.window.Window

#:import get_text src.lib.strings.get_text

<Check@MDCheckbox>:
    group: 'accents'
    size_hint: None, None
    size: dp(48), dp(48)

ScreenManager:
    id: screen_manager
    MenuScreen:
        id: menu_screen
    MeaningsScreen:
        id: meanings_screen

# MDLabel:
#     id: url_label
#     text: get_text("app_title")
#     halign: 'center'
#     theme_text_color: 'Primary'
#     font_style: 'H6'
#     pos_hint: {'center_x': 0.5, 'center_y': 0.92}

<MenuScreen>:
    name: "menu_screen"
    MDBoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        MDToolbar:
            id: toolbar
            title: get_text("app_title")
            anchor_title: 'center'
            # left_action_items: [[get_text("refresh_icon"), lambda x: app.get_running_app().restart()]]
            elevation: 10
        FloatLayout:
            # MDFlatButton:
            #     text: "Meanings"
            #     pos_hint: {'center_x': .8, 'center_y': .9}
            #     on_release: root.open_apkg()
            #     # on_press: root.manager.current = 'meanings_screen'
            MDRaisedButton:
                id: dict_dropdown
                text: get_text("browse_button")
                font_style: 'Button'
                pos_hint: {"center_x": 0.5, 'center_y': 0.85}
                on_release: root.open_dropdown(dict_dropdown=True)
            MDTextField:
                id: word_input
                text: get_text("sample_url")
                padding: "10dp"
                multiline: False
                hint_text: get_text("paste_here")
                helper_text: f"ex: {get_text('sample_url')}"
                helper_text_mode: "on_focus"
                # icon_right: get_text('paste_icon')
                # icon_right_color: app.theme_cls.primary_color
                size_hint: (.75, .1)
                pos_hint: {'center_x': 0.45, 'center_y': 0.7}
            MDIconButton:
                icon: get_text('paste_icon')
                pos_hint: {"center_x": .9, "center_y": .7}
                on_release: word_input.text = Clipboard.paste()
            # MDLabel:
            #     text: get_text("chose_accent")
            #     theme_text_color: 'Primary'
            #     font_style: 'Body1'
            #     halign: 'center'
            #     pos_hint: {'center_x': 0.5, 'center_y': 0.58}
            GridLayout:
                cols: 2
                row_force_default: True
                row_default_height: 40
                col_force_default: True
                col_default_width: 180
                pos_hint: {'center_x': 0.39, 'center_y': 0.5}
                size_hint: (None, .1)
                MDLabel:
                    text: get_text("en_uk")
                Check:
                    on_active: root.checkbox_click(self, self.active, "co.uk")
                MDLabel:
                    text: get_text("en_us")
                Check:
                    active: True
                    on_active: root.checkbox_click(self, self.active, "com")
            MDRectangleFlatButton:
                text: get_text("generate_flashcards")
                font_style: 'Button'
                pos_hint: {'center_x': 0.5, 'center_y': 0.25}
                on_press: root.dialog_popup(get_text("finding_meanings"), choice(get_text("funny_loading_messages")))
                on_release: root.show_data()


<MeaningsScreen>:
    name: "meanings_screen"
    MDBoxLayout:
        spacing: "10dp"
        pos_hint: {"top": 1}
        adaptive_height: True
        orientation: "vertical"
        size: root.width, root.height

        MDToolbar:
            id: toolbar
            title: get_text("app_title")
            anchor_title: 'center'
            left_action_items: [[get_text('back_icon'), lambda x: app.get_running_app().soft_restart()]]
            right_action_items: [[get_text('select_all_icon'), lambda x: root.select_all()]]
            elevation: 10

        ScrollView:
            size: self.size
            MDList:
                MDGridLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    width: self.minimum_width
                    cols: 2
                    # row_force_default: True
                    # row_default_height: 40
                    id: meanings_selection_list
                # spacing: '20dp'
                # padding: '25dp'
                # overlay_color: app.theme_cls.primary_dark[:-1] + [.2]
                # icon_bg_color: app.theme_cls.primary_dark
                # icon_pos: [Window.size[0] - 65, 10]
                # on_selected: app.on_selected(*args)
                # on_unselected: app.on_unselected(*args)
                # on_selected_mode: app.set_selection_mode(*args)


<MeaningsPanelContent>
    cols: 2
    # size_hint_y: None
    # height: self.minimum_height
    # orientation: "vertical"
    padding: dp(10)
    spacing: dp(10)
    adaptive_height: True

<MeaningMDCheckbox>
    size_hint: (None, 1)
    size: (48, 74)
    width: 74
    pos_hint: {'center_x': .5, 'center_y': .5}
    on_active: root.on_checkbox_active(*args)
